<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Home Finance — Final (Firebase)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">HF</div>
        <div class="title">Home Finance Dashboard</div>
      </div>
      <div class="right">Logged: Single User</div>
    </header>

    <section class="top-cards">
      <div class="card small">
        <div class="label">Total Saving</div>
        <div class="value" id="totalSaving">₹0</div>
      </div>
      <div class="card small">
        <div class="label">Total Expense</div>
        <div class="value" id="totalExpense">₹0</div>
      </div>
      <div class="card small">
        <div class="label">Trading Amount</div>
        <div class="value" id="tradingAmount">₹0</div>
      </div>
      <div class="card small">
        <div class="label">Long Term Investment</div>
        <div class="value" id="longTerm">₹0</div>
      </div>
      <div class="card small">
        <div class="label">Pending Udhaar</div>
        <div class="value" id="pendingUdhaar">₹0</div>
        <div class="muted" id="pendingCount">Unpaid:0</div>
      </div>
    </section>

    <button id="openAdd" class="add-entry">+ Add Entry</button>

    <main class="layout">
      <section class="main-col">
        <div class="card" id="chartsCard">
          <h3>Expense Breakdown & Overview</h3>
          <div class="charts">
            <canvas id="pieChart"></canvas>
            <canvas id="barChart"></canvas>
          </div>
        </div>

        <div class="card" id="recentCard">
          <h3>Recent Entries</h3>
          <table id="recentTable">
            <thead><tr><th>Date</th><th>Type</th><th>Account</th><th>Product / Note</th><th>Amount</th><th>Action</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <aside class="side-col">
        <div class="card" id="pendingCard">
          <h4>Pending Udhaar</h4>
          <div id="pendingList">—</div>
        </div>

        <div class="card" id="accountsCard">
          <h4>Accounts Summary <button id="addAccountBtn" class="mini">+Add</button></h4>
          <div id="accountsList"></div>
        </div>

        <div class="card" id="searchCard">
          <h4>Search</h4>
          <input id="globalSearch" placeholder="Search transactions / product / person" />
          <div class="small muted">Suggestions come from your data.</div>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <small>UI + Firebase demo — replace firebase config in <code>app.js</code></small>
    </footer>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal hidden">
    <div class="modal-dialog">
      <div class="modal-header"><div id="modalTitle">Add Entry</div><button id="closeModal" class="close">✕</button></div>
      <div class="modal-body">
        <form id="entryForm">
          <div class="row">
            <label>Date</label>
            <input type="date" id="fldDate" required />
            <label>Type</label>
            <select id="fldType"><option value="credit">Credit</option><option value="debit">Debit</option><option value="trading">Trading</option><option value="loan_given">Loan Given</option></select>
          </div>

          <div class="row">
            <label>Account <button type="button" id="accountPlus" class="mini">+</button></label>
            <select id="fldAccount"></select>
            <label>Amount (₹)</label>
            <input id="fldAmount" type="number" step="0.01" />
          </div>

          <div class="row">
            <label>Product</label>
            <input id="fldProduct" placeholder="Product / Category" />
            <label>Quantity</label>
            <input id="fldQty" placeholder="Qty" />
          </div>

          <div class="row">
            <label>For</label>
            <input id="fldFor" placeholder="For whom" />
            <label>By</label>
            <input id="fldBy" placeholder="By whom (who brought)" />
          </div>

          <div class="row full">
            <label>From (source)</label>
            <input id="fldFrom" placeholder="From where/which account" />
          </div>

          <div class="row full">
            <label>Note</label>
            <textarea id="fldNote" rows="3" placeholder="Optional details..."></textarea>
          </div>

          <div class="row">
            <label><input type="checkbox" id="fldUnpaid" /> Mark as Unpaid (Pending Udhaar)</label>
            <div style="flex:1"></div>
            <button type="button" id="saveEntry" class="primary">Save</button>
            <button type="button" id="cancelEntry" class="ghost">Cancel</button>
          </div>

          <!-- Dynamic account custom fields area -->
          <div id="accountCustomFields" class="card small hidden" style="margin-top:12px">
            <h4>Custom fields for account</h4>
            <div id="customList"></div>
            <div class="row">
              <input id="newFieldLabel" placeholder="Field label (e.g. Receipt #)" />
              <button type="button" id="addCustomField" class="mini">Add field</button>
            </div>
          </div>

        </form>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
